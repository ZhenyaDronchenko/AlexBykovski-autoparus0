{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel='stylesheet' href='/bower-components/Jcrop/css/Jcrop.min.css'>
    <link rel='stylesheet' href='/css/user-office/user-office.css'>
{% endblock %}

{% block body %}
    {% set isSeller = app.user.isSeller() %}
    <main class="container">
        <div class="profil">
            <div class="heading">
                <div class="profil-items user-info--line">
                    <div class="user-info">
                        <div class="user-logo" user-upload-link link-selector="#user-photo-link"
                             input-selector="#user-photo-input" img-selector="#user-photo"
                             action-url="{{ path("user_office_upload_user_photo_ajax") }}"
                             cropper-container="#dialog-cropper-container">
                            <div class="foto-user-wrapper">
                                <img id="user-photo" src="{{ image_url(app.user.photo, "user") }}" alt="Автолюбители" class="foto-user">
                            </div>
                            <a href="" id="user-photo-link" class="user-link us-btn">
                                <svg fill="#444" viewBox="0 0 24 24" width="16px" height="16px">
                                    <path d="M 11 2 L 11 11 L 2 11 L 2 13 L 11 13 L 11 22 L 13 22 L 13 13 L 22 13 L 22 11 L 13 11 L 13 2 Z "/>
                                </svg>
                            </a>

                            <input id="user-photo-input" type="file" style="display: none">
                        </div>

                        <div class="user-wrapper">
                            <a href="{{ path("show_user_base_profile") }}" class="button button-rp">{{ app.user.isProfileEdited() ? "Редактировать" : "Заполнить" }} личный профиль</a>
                            <ul class="user-about">
                                {% for car in app.user.cars %}
                                    <a class="user-avto">{{ car.brand.brandEn }} {{ car.model ? car.model.modelEn : '' }}{{ car.year ? ', ' ~ car.year : '' }}</a>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <a class="user-name">{{ app.user.name }}</a>
                </div>
                <div class="profil-items">
                    <div class="user-info user-info-r">
                        {% if isSeller %}
                            <div class="user-logo user-logo-r" user-upload-link
                                 link-selector="#business-profile-photo-link"
                                 input-selector="#business-profile-photo-input" img-selector="#business-profile-photo"
                                 action-url="{{ path("user_office_upload_business_profile_photo_ajax") }}"
                                 cropper-container="#dialog-cropper-container">
                                <div class="foto-user-wrapper">
                                    <img id="business-profile-photo" src="{{ app.user.sellerData.photo ? image_url(app.user.sellerData.photo) : image_url(default_image(3).image) }}" alt="Автолюбители" class="foto-user">
                                </div>
                                <a id="business-profile-photo-link" href="" class="user-link us-btn">
                                    <svg fill="#444" viewBox="0 0 24 24" width="16px" height="16px">
                                        <path d="M 11 2 L 11 11 L 2 11 L 2 13 L 11 13 L 11 22 L 13 22 L 13 13 L 22 13 L 22 11 L 13 11 L 13 2 Z "/>
                                    </svg>
                                </a>
                                <input id="business-profile-photo-input" type="file" style="display: none">
                            </div>
                        {% endif %}
                        <div class="user-edit">
                            <a href="{{ path("show_user_business_office") }}" class="button button-rp">{{ isSeller ? "Редактировать" : "Создать" }} бизнес профиль</a>
                            {% if app.user.sellerData %}
                                <ul class="btn-block">
                                    {% if app.user.sellerData.sellerCompany.isSparePartSeller or app.user.sellerData.sellerCompany.isAutoSeller %}
                                        <li><a href="{{ path("user_profile_product_categories") }}" class="user-btn" data-text="Авто/Запчасти"></a></li>
                                    {% endif %}
                                    {% if app.user.sellerData.sellerCompany.isService %}
                                        <li><a class="user-btn" data-text="Услуги"></a></li>
                                    {% endif %}
                                    {% if app.user.sellerData.sellerCompany.isNews %}
                                        <li><a class="user-btn" data-text="Статьи"></a></li>
                                    {% endif %}
                                </ul>
                            {% endif %}
                        </div>
                    </div>
                    <a class="user-company">{{ app.user.sellerData ? app.user.sellerData.sellerCompany.companyName : "" }}</a>
                </div>
            </div>
        </div>

        <div class="choice">
            <ul class="choice-block">
                <li><a class="icon" href="#"><i class="fa fa-map-o" aria-hidden="true"></i></a> </li>
                <li><a id="initiator-open-popup3" class="icon open-popup-button" href="#"><i class="fa fa-suitcase"></i>Business</a></li>
                <li><a class="icon" href="#"><i class="fa fa-camera"></i>Фотогалерея</a></li>
                <li user-upload-link link-selector="#user-photo-link-gallery" input-selector="#user-photo-input-gallery"
                    img-selector="#user-photo" action-url="{{ path("user_office_upload_user_photo_ajax") }}"
                    cropper-container="#dialog-cropper-container-gallery">
                    <a id="user-photo-link-gallery"  class="icon icon-plus us-btn1" href="">
                        <i class="fa fa-plus-square-o" aria-hidden="true"></i>
                    </a>
                    <input id="user-photo-input-gallery" type="file" style="display: none">
                </li>
            </ul>
        </div>

        <ul class="items">
            <li class="user-item">
                <div class="marka">
                    <div class="name">
                        <img class="name-foto" src="img/maz.jpg" alt="">
                        <b class="name-text">Иванов Иван Иванович</b>
                    </div>
                    <div class="tool">
                        <a href="" class="tool-rdc"><span class="item-1">Редактировать</span><img src="img/cra.png" alt="Редактировать"></a>
                        <a href="" class="tool-close"><span class="item-1">Удалить</span><img src="img/trash-can.svg" alt="Удалить"></a>
                    </div>
                </div>
                <div class="prod">
                    <img class="prod-foto" src="img/maz.jpg" alt="">
                    <div class="prod-content">
                        <span class="date">18.02.2019</span>
                        <span class="time">15:56</span>
                        <span class="adress">Беларусь, Минск, Гая 37</span>
                        <div class="text-block">
                            <p id='text' class='texthide'>текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки</p>
                            <button onclick='textbtn()' id='button-t'>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</button>
                        </div>
                        <ul class="breadcrumbs">
                            <li>
                                <a class="item-link" href="index.html">
                                    <img src="img/windsurfing.png" alt="Парус">
                                </a>
                            </li>
                            <li>
                                <a class="item-link" href="#">/ Toyota</a>
                            </li>
                            <li>
                                <a class="item-link" href="#">/ Avensis T25</a>
                            </li>
                            <li><a class="current">/ Генератор</a></li>
                        </ul>
                    </div>
                </div>
            </li>

            <li class="user-item">
                <div class="marka">
                    <div class="name">
                        <img class="name-foto" src="img/maz.jpg" alt="">
                        <b class="name-text">Иванов Иван Иванович</b>
                    </div>
                    <div class="tool">
                        <a href="" class="tool-rdc"><span class="item-1">Редактировать</span><img src="img/cra.png" alt="Редактировать"></a>
                        <a href="" class="tool-close"><span class="item-1">Удалить</span><img src="img/trash-can.svg" alt="Удалить"></a>
                    </div>
                </div>
                <div class="prod">
                    <img class="prod-foto" src="img/maz.jpg" alt="">
                    <div class="prod-content">
                        <span class="date">18.02.2019</span>
                        <span class="time">15:56</span>
                        <span class="adress">Беларусь, Минск, Гая 37</span>
                        <div class="text-block">
                            <p id='text' class='texthide'>текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки</p>
                            <button onclick='textbtn()' id='button-t'>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</button>
                        </div>
                        <ul class="breadcrumbs">
                            <li>
                                <a class="item-link" href="index.html">
                                    <img src="img/windsurfing.png" alt="Парус">
                                </a>
                            </li>
                            <li>
                                <a class="item-link" href="#">/ Toyota</a>
                            </li>
                            <li>
                                <a class="item-link" href="#">/ Avensis T25</a>
                            </li>
                            <li><a class="current">/ Генератор</a></li>
                        </ul>
                    </div>
                </div>
            </li>

            <li class="user-item">
                <div class="marka">
                    <div class="name">
                        <img class="name-foto" src="img/maz.jpg" alt="">
                        <b class="name-text">Иванов Иван Иванович</b>
                    </div>
                    <div class="tool">
                        <a href="" class="tool-rdc"><span class="item-1">Редактировать</span><img src="img/cra.png" alt="Редактировать"></a>
                        <a href="" class="tool-close"><span class="item-1">Удалить</span><img src="img/trash-can.svg" alt="Удалить"></a>
                    </div>
                </div>
                <div class="prod">
                    <img class="prod-foto" src="img/maz.jpg" alt="">
                    <div class="prod-content">
                        <span class="date">18.02.2019</span>
                        <span class="time">15:56</span>
                        <span class="adress">Беларусь, Минск, Гая 37</span>
                        <div class="text-block">
                            <p id='text' class='texthide'>текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки, текст 1 из админки</p>
                            <button onclick='textbtn()' id='button-t'>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</button>
                        </div>
                        <ul class="breadcrumbs">
                            <li>
                                <a class="item-link" href="index.html">
                                    <img src="img/windsurfing.png" alt="Парус">
                                </a>
                            </li>
                            <li>
                                <a class="item-link" href="#">/ Toyota</a>
                            </li>
                            <li>
                                <a class="item-link" href="#">/ Avensis T25</a>
                            </li>
                            <li><a class="current">/ Генератор</a></li>
                        </ul>
                    </div>
                </div>
            </li>
        </ul>

        <div class="sail-f">
            <img src="img/windsurfing.png" alt="Парус">
            <img src="img/windsurfing.png" alt="Парус">
            <img src="img/windsurfing.png" alt="Парус">
            <img src="img/windsurfing.png" alt="Парус">
            <img src="img/windsurfing.png" alt="Парус">
        </div>
    </main>

    <div id="dialog-cropper-container" class="overlay1">
        <section id="cropper-modal" class="modal1">
            <h2 class="subtitle" data-text="Редактор изображения"></h2>
            <div id="image-preview-container" class="img-cont">
                <img class="modal-img" src="" alt="Фото" style="display: none">
            </div>
            <div class="btn-list">
                <button id="cancel-button" class="button button-close1">Отменить</button>
                <button id="save-button" class="button">Сохранить</button>
            </div>
        </section>
    </div>

    <div id="dialog-cropper-container-gallery" class="overlay2">
        <section id="cropper-modal-gallery" class="modal2">
            <div id="image-preview-container-gallery" class="img-cont">
                <img class="modal-img1" src="" alt="Фото" style="display: none">
            </div>
            <div class="btn-lists">
                <textarea name="text" rows="3" placeholder="Пост(описание) к фото"></textarea>
                <div class="btn-input">
                    <button id="cancel-button" class="button button-mr button-close2">Загрузить фото</button>
                    <button id="cancel-button" class="button button-mr button-close2">Отменить</button>
                    <button id="save-button" class="button">Сохранить</button>
                </div>
            </div>
        </section>
    </div>

    {% if not isSeller %}
        <div id="popup3" class="overlay3">
            <section class="modal3">
                <button id="initiator-close-popup3" class="modal-close close-popup-button">
                    <svg  x="0px" y="0px" width="25px" height="25px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve">
                        <line fill="none" stroke="#727272" stroke-width="4" stroke-miterlimit="10" x1="7.741" y1="7.741" x2="42.359" y2="42.359"/>
                        <line fill="#none" stroke="#727272" stroke-width="4" stroke-miterlimit="10" x1="42.258" y1="7.742" x2="7.618" y2="42.382"/>
                    </svg>
                </button>
                <h3 class="modal-title">{{ default_text(13).headline }}</h3>
                <div class="modal-text">{{ default_text(13).text | raw }}</div>
                <a href="{{ path("show_user_business_office") }}"><button class="button">Создать бизнес профиль</button></a>
            </section>
        </div>
    {% endif %}
{% endblock %}

{% block javascripts %}
    <script src='/bower-components/Jcrop/js/Jcrop.min.js'></script>
    <script src='/js/client/service/image-upload-service.js'></script>
    <script src='/js/client/directive/user-upload-link.js'></script>
    <script>
        // var popup1 = document.querySelector('.overlay1');
        //
        // var openPopupButton1 = document.querySelectorAll('.us-btn');
        //
        // var closePopupButton1 = popup1.querySelector('.button-close1');
        //
        // openPopupButton1.forEach(function(item){
        //     item.addEventListener('click', function (evt) {
        //         evt.preventDefault();
        //         popup1.classList.add('modal--show');
        //     });
        // });
        //
        //
        // closePopupButton1.addEventListener('click', function () {
        //     popup1.classList.remove('modal--show');
        // });
        //
        // document.addEventListener('keydown', function (evt) {
        //     if (evt.keyCode === 27) {
        //         popup1.classList.remove('modal--show');
        //     }
        // });
        //
        //
        // var popup2 = document.querySelector('.overlay2');
        //
        // var openPopupButton2 = document.querySelectorAll('.us-btn1');
        //
        // var closePopupButton2 = popup2.querySelector('.button-close2');
        //
        // openPopupButton2.forEach(function(item){
        //     item.addEventListener('click', function (evt) {
        //         evt.preventDefault();
        //         popup2.classList.add('modal--show');
        //     });
        // });
        //
        //
        // closePopupButton2.addEventListener('click', function () {
        //     popup2.classList.remove('modal--show');
        // });
        //
        // document.addEventListener('keydown', function (evt) {
        //     if (evt.keyCode === 27) {
        //         popup2.classList.remove('modal--show');
        //     }
        // });
        //
        //
        // var popup3 = document.querySelector('.overlay3');
        //
        // var openPopupButton3 = document.querySelector('.bis-btn');
        //
        // var closePopupButton3 = popup3.querySelector('.button-close3');
        //
        //
        // openPopupButton3.addEventListener('click', function (evt) {
        //     evt.preventDefault();
        //     popup3.classList.add('modal--show');
        // });
        //
        //
        //
        // closePopupButton3.addEventListener('click', function () {
        //     popup3.classList.remove('modal--show');
        // });
        //
        // document.addEventListener('keydown', function (evt) {
        //     if (evt.keyCode === 27) {
        //         popup3.classList.remove('modal--show');
        //     }
        // });
        //
        //
        //
        //
        //
        //
        // function textbtn() {
        //
        //     var text1Elem = document.getElementById('text');
        //
        //     var toggle3 = even_odd(n4);
        //
        //     if(toggle3 == true) {
        //         text1Elem.className = 'textshow';
        //         var toggleB = document.getElementById('button-t');
        //         toggleB.textContent = '<<<<<<<';
        //     }
        //     else {
        //         text1Elem.className = 'texthide';
        //         var toggleB = document.getElementById('button-t');
        //         toggleB.textContent = '>>>>>>>';
        //     }
        //
        //     n4 +=1;
        //
        // };
    </script>
{% endblock %}